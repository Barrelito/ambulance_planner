<!DOCTYPE html>
<html lang="sv">
<head>
    <meta charset="UTF-8">
    <title>Teknisk Admin</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>.form-control-sm{font-size:0.85rem;}.unit-row:hover{background-color:#f8f9fa;}</style>
</head>
<body class="bg-light">
<nav class="navbar navbar-dark bg-dark mb-4"><div class="container"><span class="navbar-brand mb-0 h1">ğŸ”§ Teknisk Admin</span><a href="/" class="btn btn-outline-light btn-sm">Tillbaka</a></div></nav>
<div class="container pb-5"><div class="row"><div class="col-md-5">
    <div class="card shadow-sm mb-4 border-dark"><div class="card-header bg-dark text-white"><h5 class="m-0">ğŸ•µï¸â€â™‚ï¸ SÃ¤kerhet & Loggar</h5></div><div class="card-body"><a href="/admin/logs" class="btn btn-outline-dark w-100">ğŸ“‚ Ã–ppna HÃ¤ndelselogg</a></div></div>
    <div class="card shadow-sm mb-4 border-primary"><div class="card-header bg-primary text-white"><h5 class="m-0">ğŸ¢ Stationer</h5></div><div class="card-body">
        <form action="/admin/add_station" method="POST" class="d-flex gap-2 mb-4 border-bottom pb-3"><input type="text" name="name" class="form-control" placeholder="Ny station..." required><button type="submit" class="btn btn-success">LÃ¤gg till</button></form>
        <div style="max-height: 200px; overflow-y: auto;">{% for s in stations %}<form action="/admin/update_station" method="POST" class="d-flex gap-2 mb-2"><input type="hidden" name="station_id" value="{{ s.id }}"><input type="text" name="name" class="form-control form-control-sm" value="{{ s.name }}"><button type="submit" class="btn btn-outline-primary btn-sm">Spara</button></form>{% endfor %}</div>
    </div></div>
    <div class="card shadow-sm mb-4 border-warning"><div class="card-header bg-warning text-dark"><h5 class="m-0">ğŸ’¾ Backup</h5></div><div class="card-body"><a href="/admin/export_excel" class="btn btn-outline-dark w-100 mb-3">â¬‡ï¸ Ladda ner Excel</a><form action="/admin/import_excel" method="POST" enctype="multipart/form-data"><input type="file" name="file" class="form-control mb-2" accept=".xlsx" required><button type="submit" class="btn btn-danger w-100">LÃ¤s in</button></form></div></div>
</div>
<div class="col-md-7"><div class="card shadow-sm"><div class="card-header bg-secondary text-white"><h5 class="m-0">ğŸš‘ Konfigurera Enheter</h5></div><div class="card-body p-0"><div style="max-height:1000px; overflow-y:auto;">
    {% for station in stations %}
    <div class="p-2 bg-dark text-white d-flex justify-content-between align-items-center mt-0"><strong class="ms-2">{{ station.name }}</strong></div>
    <div class="container-fluid py-2">
        <div class="row g-1 mb-1 text-muted small fw-bold text-center">
            <div class="col-3">Bilnamn</div><div class="col-2">Tider</div><div class="col-1">SITS</div><div class="col-1">C1</div><div class="col-1">Flex</div><div class="col-1"></div>
        </div>
        {% for unit in station.units %}
        <form action="/admin/update_unit" method="POST" class="row g-1 align-items-center unit-row">
            <input type="hidden" name="unit_id" value="{{ unit.id }}">
            <div class="col-3"><input type="text" name="name" class="form-control form-control-sm fw-bold" value="{{ unit.name }}"></div>
            <div class="col-2"><input type="text" name="day_time" class="form-control form-control-sm" value="{{ unit.day_time }}"></div>
            <div class="col-1 text-center"><input class="form-check-input" type="checkbox" name="requires_sits" {% if unit.requires_sits %}checked{% endif %}></div>
            <div class="col-1 text-center"><input class="form-check-input" type="checkbox" name="requires_c1" {% if unit.requires_c1 %}checked{% endif %}></div>
            <div class="col-1 text-center"><input class="form-check-input" type="checkbox" name="is_flex" {% if unit.is_flex %}checked{% endif %}></div>
            <div class="col-1 text-end"><button type="submit" class="btn btn-primary btn-sm px-2">ğŸ’¾</button></div>
        </form>
        {% endfor %}
    </div>
    {% endfor %}
</div></div></div></div></div></div>
</body></html>